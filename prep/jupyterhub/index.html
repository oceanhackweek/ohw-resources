<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Jupyter and the Hub - OceanHackWeek'21 Resources</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Jupyter and the Hub";
    var mkdocs_page_input_path = "prep/jupyterhub.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> OceanHackWeek'21 Resources</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Overview</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../about_ohw/">About OHW</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../conduct/">Code of Conduct</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Logistics</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../logistics/overview/">Logistics Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../schedule/">Schedule</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../logistics/getting_help/">Getting Help</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../logistics/coffeebreaks/">Coffee Breaks</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Preparation</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../git/">Git</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../github/">GitHub</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Jupyter and the Hub</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#jupyter-notebooks-and-the-jupyter-ecosystem">Jupyter notebooks and the Jupyter ecosystem</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#why-are-we-using-a-shared-cloud-computing-environment">Why are we using a shared cloud computing environment?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-access-the-shared-cloud-environment">How do I access the shared cloud environment?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-the-tutorial-repository">How do I get the tutorial repository?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-get-my-code-in-and-out-of-jupyterhub">How do I get my code in and out of JupyterHub?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#end-your-hub-session-every-day-will-i-lose-all-of-my-work">End your Hub session every day. Will I lose all of my work?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-do-i-do-distributed-computation">How do I do distributed computation?</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#references-and-resources">References and Resources</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../conda/">Conda, Python, R</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Tutorials</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../tutorials/getting_started/">Getting Started</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Projects</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../projects/overview/">Project Overview</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../projects/steps/">Hacking at OHW21</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../projects/projectlist/">OHW21 Projects</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">OceanHackWeek'21 Resources</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Preparation &raquo;</li>
        
      
    
    <li>Jupyter and the Hub</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/oceanhackweek/ohw-resources/edit/master/docs/prep/jupyterhub.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="jupyterhub">JupyterHub</h1>
<h2 id="jupyter-notebooks-and-the-jupyter-ecosystem">Jupyter notebooks and the Jupyter ecosystem</h2>
<p>You may have heard of <a href="https://en.wikipedia.org/wiki/Project_Jupyter">Jupyter</a> -- an open computing "ecosystem" developed by <a href="https://jupyter.org">Project Jupyter</a>. This ecosystem is described succinctly and effectively in <a href="https://jupyter4edu.github.io/jupyter-edu-book/">the online open book, Teaching and Learning with Jupyter</a>:</p>
<blockquote>
<p>Project Jupyter is three things: a collection of standards, a community, and a set of software tools. Jupyter Notebook, one part of Jupyter, is software that creates a Jupyter notebook. A Jupyter notebook is a document that supports mixing executable code, equations, visualizations, and narrative text. Specifically, Jupyter notebooks allow the user to bring together data, code, and prose, to tell an interactive, computational story. (<a href="https://jupyter4edu.github.io/jupyter-edu-book/why-we-use-jupyter-notebooks.html#but-first-what-is-jupyter-notebook"><em>"2.2 But first, what is Jupyter Notebook?"</em></a>)</p>
</blockquote>
<p>We will use the <a href="https://jupyterlab.readthedocs.io/en/stable/">JupyterLab</a> software to create, manage and run Jupyter notebooks. You will be exposed to Jupyter notebooks throughout the hackweek, including in most tutorials. To learn more about Jupyter, Jupyter notebooks and JupyterLab:</p>
<ul>
<li>Check out several sections in the <em>Teaching and Learning with Jupyter</em> online open book, specially <a href="https://jupyter4edu.github.io/jupyter-edu-book/jupyter.html">Chapter 5 Jupyter Notebook ecosystem</a>.</li>
<li>See the OceanHackWeek 2020 pre-hackweek tutorial "Jupyter and Scientific Python basics: numpy, pandas, matplotlib", which demonstrates effective Jupyter use both on your computer ("locally") and on JupyterHub: <a href="https://github.com/oceanhackweek/ohw-preweek/tree/master/data-analysis-modules">Jupyter notebooks</a> — <a href="https://youtu.be/CTUAgpvfze0">tutorial video</a>. The video includes Q&amp;As at the end where you'll find common questions you may find asking yourself.</li>
<li>See the <a href="#references-and-resources">resources at the end of this page</a>.</li>
</ul>
<h2 id="why-are-we-using-a-shared-cloud-computing-environment">Why are we using a shared cloud computing environment?</h2>
<p>Teaching software to a diverse group of participants, each with different computers and operating systems, can be challenging. There are specific ways to configure our software for the tutorials to be successful, so it takes time to get everyone set up consistently. Our solution to this is to give everyone access to a cloud computing environment that is pre-configured for the specific software we will deploy. This cloud computing instance can be accessed from any web browser, which eliminates the need for configuring each person's individual computer. For this hackweek we have created virtual computing instances that can be deployed on demand in a parallel computing environment. We use JupyterHub as a way to give a Jupyter Notebook server (<a href="https://jupyterlab.readthedocs.io/en/stable/">JupyterLab</a>) to each person in a group. <a href="https://www.slideshare.net/willingc/jupyterhub-a-thing-explainer-overview?from_action=save">These (slightly old) slides</a> give a nice overview of what JupyterHub is all about. JupyterHub enables us to quickly begin working with code without spending time to get the necessary libraries and dependencies set up on everyone's individual computers.</p>
<p>We encourage you to use our shared JupyterHub resources for running all the tutorials and for your projects. We also hope you will practice installing Python libraries locally on your laptop so that you can continue working after leaving our event.</p>
<h2 id="how-do-i-access-the-shared-cloud-environment">How do I access the shared cloud environment?</h2>
<p>Access to our shared cloud environment is easy. Just click on <a href="https://ohw.pilot.2i2c.cloud">https://ohw.pilot.2i2c.cloud</a></p>
<p><img alt="hub-opening" src="../../img/ohw21-jupyterhub-opening.png" /></p>
<p>You can now click on the "Log in to continue" button, then on the next screen click on "Sign in with GitHub" to grant JupyterHub the required permissions. In the next window, enter your GitHub username (or email address) and password. 
You will then see something like this while the JupyterHub OceanHackWeek 2021 server environment is loading:</p>
<p><img alt="hub-loading" src="../../img/ohw21-jupyterhub-loading.png" /></p>
<p>It will take a bit of time for this to load - be patient! Once things are spun up you will see your very own instance of a <a href="https://jupyterlab.readthedocs.io/en/stable/">JupyterLab</a> graphical user interface:</p>
<p><img alt="jupyterlab" src="../../img/ohw21-jupyterlab.png" /></p>
<h2 id="how-do-i-get-the-tutorial-repository">How do I get the tutorial repository?</h2>
<p>For the tutorials, there are two primary ways of getting the notebooks. You can use the traditional git management route (<a href="#How-do-I-get-my-code-in-and-out-of-JupyterHub">described below</a>), or you can use <a href="https://ohw.pilot.2i2c.cloud/hub/user-redirect/git-pull?repo=https%3A%2F%2Fgithub.com%2Foceanhackweek%2Fohw-tutorials&amp;urlpath=lab%2Ftree%2Fohw-tutorials%2F&amp;branch=master">this magical nbgitpuller link</a>.</p>
<p><code>nbgitpuller</code> is nice, because it will automatically merge any changes you make with the changes from the upstream repo on subsequent pulls via a <a href="https://jupyterhub.github.io/nbgitpuller/topic/automatic-merging.html#topic-automatic-merging">series of sane rules</a>.</p>
<p>You can accomplish the same results as nbgitpuller when using <code>git</code> directly, but it can take a complicated dance of <code>git add</code>, <code>git stash</code>, <code>git pull</code>, and <code>git stash apply</code> to keep your changes and get the changes from upstream.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you start by using the nbgitpuller link, and then switch to using git directly, using the nbgitpuller link again will most likely lead to <a href="https://jupyterhub.github.io/nbgitpuller/#when-to-use-nbgitpuller">unpredictable results</a>.</p>
</div>
<h2 id="how-do-i-get-my-code-in-and-out-of-jupyterhub">How do I get my code in and out of JupyterHub?</h2>
<p>When you start your own instance of JupyterHub you will have access to your own virtual drive space. No other JupyterHub users will be able to see or access your data files. Next we will explain how you can upload files to your virtual drive space and how to save files from JupyterHub back to another location, such as GitHub or your own local laptop drive.</p>
<p>First we'll show you how to pull some files from GitHub into your virtual drive space.  This will be a common task during the hackweek: at the start of most tutorials we'll ask you to "clone" (make a copy of) the GitHub repository corresponding to the specific tutorial being taught into your JupyterHub drive space.</p>
<p>To do this, we will need to interface with the JupyterHub file system. JupyterHub is deployed in a Linux operating system and we will need to open a terminal within the JupyterHub JupyterLab interface to manage our files. There are two ways to do this: (1) Navigate to the "File" menu, choose "New" and then "Terminal" or (2) click on the "terminal" button in JupyterLab:</p>
<p><img alt="terminal-button" src="../../img/terminal-button.png" /></p>
<p>This will open a new terminal tab in your JupyterLab interface:</p>
<p><img alt="terminal-tab" src="../../img/terminal.png" /></p>
<p>You can issue any Linux commands to manage your local file system.</p>
<p>Now let's clone a repository (see the <a href="../git/">Git Setup and Basics</a> page). We'll illustrate this with the <code>ohw-tutorials</code> repository. First, navigate in a browser on your own computer to the repository link <a href="https://github.com/oceanhackweek/ohw-tutorials">https://github.com/oceanhackweek/ohw-tutorials</a>. Next, click on the green "Code" button and then copy the url into your clipboard by clicking the copy button (clipboard icon):</p>
<p><img alt="clone" src="../../img/ohw21-clone.png" /></p>
<p>Now navigate back to your command line in JupyterLab. Type <code>git clone</code> and then paste in the url:</p>
<pre><code class="language-bash">git clone https://github.com/oceanhackweek/ohw-tutorials.git
</code></pre>
<p>After issuing the <code>git clone</code> command you should see something like this (again, the screenshot below is for a different repo, but the concept is identical):</p>
<p><img alt="clone-result" src="../../img/clone-result.png" /></p>
<h2 id="end-your-hub-session-every-day-will-i-lose-all-of-my-work">End your Hub session every day. Will I lose all of my work?</h2>
<p><strong>When you are finished working for the day or for an extended period of time, it is important to explicitly shutdown your JupyterHub session,</strong> to reduce the load on our cloud infrastructure and overall costs. </p>
<p><strong>To shutdown your server</strong>, if you are viewing JupyterLab, you access the control via <code>File &gt; Hub Control Panel</code> menu item:</p>
<p><img alt="hub shut down step 1" src="../../img/ohw21-shutdownhub-step1.png" /></p>
<p>Then you can shutdown your server from your hub control panel (which you can also access directly from https://ohw.pilot.2i2c.cloud/hub/home ):</p>
<p><img alt="hub shut down step 2" src="../../img/ohw21-shutdownhub-step2.png" /></p>
<p>Note that the menu item <code>File &gt; Log Out</code> doesn't actually shut down the server, so please follow these steps instead.</p>
<div class="admonition warning you will not lose your work when shutting down the server">
<p class="admonition-title">Warning</p>
<p>Shutting down (Stop Server) will <strong>NOT</strong> cause any of your work to be lost or deleted. It simply shuts down some resources. It would be equivalent to turning off your desktop computer at the end of the day.</p>
</div>
<h2 id="how-do-i-do-distributed-computation">How do I do distributed computation?</h2>
<p><a href="https://dask.org/">Dask</a> is available on the JupyterHub for distributed compute.</p>
<p>To start up a Dask cluster, call</p>
<pre><code class="language-python">from dask.distributed import Client
from dask_gateway import GatewayCluster

cluster = GatewayCluster()
client = Client(cluster)

# xarray becomes even more awesome
</code></pre>
<p>And then either call <code>cluster</code> on it's own line in a cell and use the UI, or <code>cluster.scale(NUMBER_OF_WORKERS_TO_SCALE_TO)</code>.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Just as it can take a few minutes for JupyterHub to start up your server, it can also take a few minutes before Dask workers become available. </p>
<p>We are working on making Dask (and server) scaling faster, but no promises of faster scaling at this point.</p>
</div>
<p>Similar to your server, please shutdown your Dask clusters when you are done.</p>
<pre><code class="language-python">cluster.shutdown()  # or cluster.close()
</code></pre>
<h2 id="references-and-resources">References and Resources</h2>
<ul>
<li><a href="https://www.nature.com/articles/d41586-018-07196-1">Why Jupyter is data scientists’ computational notebook of choice. An improved architecture and enthusiastic user base are driving uptake of the open-source web tool (Nature, 2018-10)</a></li>
<li><a href="https://jupyter4edu.github.io/jupyter-edu-book/">Teaching and Learning with Jupyter</a>, an online open book.</li>
<li>OceanHackWeek 2020 pre-hackweek tutorial "Jupyter and Scientific Python basics: numpy, pandas, matplotlib": <a href="https://github.com/oceanhackweek/ohw-preweek/tree/master/data-analysis-modules">Jupyter notebooks</a> — <a href="https://youtu.be/CTUAgpvfze0">tutorial video</a>.</li>
<li>From <a href="https://dataquest.io">https://dataquest.io</a><ul>
<li><a href="https://www.dataquest.io/blog/jupyter-notebook-tutorial/">Jupyter Notebook for Beginners: A Tutorial</a></li>
<li><a href="https://www.dataquest.io/blog/advanced-jupyter-notebooks-tutorial/">Tutorial: Advanced Jupyter Notebooks</a></li>
<li><a href="https://www.dataquest.io/blog/jupyter-notebook-tips-tricks-shortcuts/">28 Jupyter Notebook Tips, Tricks, and Shortcuts</a></li>
</ul>
</li>
<li><a href="https://www.blog.pythonlibrary.org/2019/02/05/getting-started-with-jupyterlab/">Getting Started with JupyterLab</a></li>
<li><a href="http://bebi103.caltech.edu.s3-website-us-east-1.amazonaws.com/2019a/content/lessons/lesson_00/l00b_intro_to_jupyterlab.html">Lesson 0b: Introduction to JupyterLab - (Justin Bois) Introduction to Data Analysis in the Biological Sciences, Caltech</a></li>
<li><a href="https://towardsdatascience.com/jupyter-lab-evolution-of-the-jupyter-notebook-5297cacde6b">Jupyter Lab: Evolution of the Jupyter Notebook. An overview of JupyterLab, the next generation of the Jupyter Notebook.</a></li>
</ul>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../conda/" class="btn btn-neutral float-right" title="Conda, Python, R">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../github/" class="btn btn-neutral" title="GitHub"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/oceanhackweek/ohw-resources/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../github/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../conda/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
